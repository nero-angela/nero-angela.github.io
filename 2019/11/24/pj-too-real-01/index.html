
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="🐈 Nero&#39;s Blog">
    <title>1부. 딥러닝을 이용하여 더욱 현실감 있는 AR 앱 만들기 - 🐈 Nero&#39;s Blog</title>
    <meta name="author" content="Nero">
    <link rel="canonical" href="https://nero.devstory.co.kr/2019/11/24/pj-too-real-01/">
    
    
        <link rel="icon" href="https://nero.devstory.co.kr/assets/images/favicon.ico">
    
    
        <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Nero","sameAs":["https://github.com/nero-angela","http://devstory.co.kr"],"image":"profile.jpeg"},"articleBody":"딥러닝을 이용하여 더욱 현실감 있는 AR 앱을 개발한 이야기를 공유합니다.\n\n# 프로젝트 소개AR(Augmented Reality)을 이용한 다양한 어플리케이션들이 출시되고 있습니다. 이러한 AR 어플리케이션들은 Android에서는 ARCore를 그리고 iOS에서는 ARKit를 통해 구현할 수 있습니다.\nApple의 Sample Code에 사용된 램프 모델출처 - Placing Objects and Handling 3D Interaction\n\n가끔 고정된 그림자 이미지가 아닌, 임의의 가상 조명을 생성하여 오브젝트에 그림자를 그려주는 몇몇 AR 어플리케이션들이 있지만, 가상 조명의 위치나 밝기가 현실에 존재하는 광원과 달라 몰입감이 떨어지는건 마찬가지였습니다.\n가상 오브젝트의 색감 또는 그림자가 주변 물체와 이질감이 느껴지는 원인은, 현실에 있는 조명들의 위치와 밝기 정보가 가상 오브젝트에 반영되어 랜더링 되지 않았기 때문이라고 생각하였습니다. 따라서 이번 프로젝트의 목표를 다음과 같이 정의하였습니다.\n\n✔︎ 프로젝트 목표현실의 조명의 위치와 밝기 정보를 반영하여, 더욱 현실감 있는 AR 어플리케이션 만들어보자!\n\n\n\n\n# 프로젝트 결과물백문이 불여일견이니 먼저 어플리케이션 작동 영상을 보겠습니다.\n\n\n\n\n\n개발환경다음과 같은 개발 환경에서 작업하였습니다.\n","dateCreated":"2019-11-24T16:44:28+09:00","dateModified":"2019-12-07T15:38:32+09:00","datePublished":"2019-11-24T16:44:28+09:00","description":"딥러닝을 이용하여 더욱 현실감 있는 AR 앱을 개발한 이야기를 공유합니다.","headline":"1부. 딥러닝을 이용하여 더욱 현실감 있는 AR 앱 만들기","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://nero.devstory.co.kr/2019/11/24/pj-too-real-01/"},"publisher":{"@type":"Organization","name":"Nero","sameAs":["https://github.com/nero-angela","http://devstory.co.kr"],"image":"profile.jpeg","logo":{"@type":"ImageObject","url":"profile.jpeg"}},"url":"https://nero.devstory.co.kr/2019/11/24/pj-too-real-01/","keywords":"iOS, AR, Object Detection, Deep Learning, YOLO v3"}</script>
    <meta name="description" content="딥러닝을 이용하여 더욱 현실감 있는 AR 앱을 개발한 이야기를 공유합니다.">
<meta name="keywords" content="iOS,AR,Object Detection,Deep Learning,YOLO v3">
<meta property="og:type" content="blog">
<meta property="og:title" content="1부. 딥러닝을 이용하여 더욱 현실감 있는 AR 앱 만들기">
<meta property="og:url" content="https:&#x2F;&#x2F;nero.devstory.co.kr&#x2F;2019&#x2F;11&#x2F;24&#x2F;pj-too-real-01&#x2F;index.html">
<meta property="og:site_name" content="🐈 Nero&#39;s Blog">
<meta property="og:description" content="딥러닝을 이용하여 더욱 현실감 있는 AR 앱을 개발한 이야기를 공유합니다.">
<meta property="og:locale" content="en">
<meta property="og:image" content="https:&#x2F;&#x2F;user-images.githubusercontent.com&#x2F;26322627&#x2F;69536166-d2067f00-0fc0-11ea-8883-b9ae5509869a.png">
<meta property="og:image" content="https:&#x2F;&#x2F;user-images.githubusercontent.com&#x2F;26322627&#x2F;69901403-6d826000-13c4-11ea-9282-4b58dac120ac.png">
<meta property="og:image" content="https:&#x2F;&#x2F;user-images.githubusercontent.com&#x2F;26322627&#x2F;70038098-10bcba80-15fb-11ea-94d2-314f8d598601.png">
<meta property="og:updated_time" content="2019-12-07T06:38:32.832Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;user-images.githubusercontent.com&#x2F;26322627&#x2F;69536166-d2067f00-0fc0-11ea-8883-b9ae5509869a.png">
    
    
        
    
    
        <meta property="og:image" content="https://nero.devstory.co.kr/assets/images/profile.jpeg">
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/style-zredo0hxiehb8dterhs0el4n3gmnb7ukdaqeye6w0vedmwfwe8f5cyefkai4.min.css">
    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-151594285-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-151594285-1');
    </script>


    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/" aria-label>
            🐈 Nero&#39;s Blog
        </a>
    </div>
    
        
            <a class="header-right-picture " href="#about" aria-label="Open the link: /#about">
        
        
            <img class="header-picture" src="/assets/images/profile.jpeg" alt="Author&#39;s picture">
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/#about" aria-label="Read more about the author">
                    <img class="sidebar-profile-picture" src="/assets/images/profile.jpeg" alt="Author&#39;s picture">
                </a>
                <h4 class="sidebar-profile-name">Nero</h4>
                
                    <h5 class="sidebar-profile-bio"><p><a href="https://github.com/nero-angela" target="_blank" rel="external nofollow noopener noreferrer">Github</a> / <a href="http://devstory.co.kr" target="_blank" rel="external nofollow noopener noreferrer">Porfolio</a></p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/" title="Home">
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-categories" title="Categories">
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-tags" title="Tags">
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/all-archives" title="Archives">
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/nero-angela" target="_blank" rel="external nofollow noopener noreferrer" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="http://devstory.co.kr" target="_blank" rel="external nofollow noopener noreferrer" title="portfolio">
                    
                        <i class="sidebar-button-icon fas fa-briefcase" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">portfolio</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/atom.xml" title="RSS">
                    
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="5" class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
    <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            1부. 딥러닝을 이용하여 더욱 현실감 있는 AR 앱 만들기
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2019-11-24T16:44:28+09:00">
	
		    Nov 24, 2019
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Project/">Project</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <!-- NERO :: Add TOC -->
            <hr class="nero-toc-line">
            <blockquote>
                <strong>목차</strong>
            </blockquote>
            <ol class="nero-toc"><li class="nero-toc-item nero-toc-level-1"><a class="nero-toc-link" href="#프로젝트-소개"><span class="nero-toc-text"># 프로젝트 소개</span></a><ol class="nero-toc-child"><li class="nero-toc-item nero-toc-level-2"><a class="nero-toc-link" href="#프로젝트-목표"><span class="nero-toc-text">프로젝트 목표</span></a></li></ol></li><li class="nero-toc-item nero-toc-level-1"><a class="nero-toc-link" href="#프로젝트-결과물"><span class="nero-toc-text"># 프로젝트 결과물</span></a><ol class="nero-toc-child"><li class="nero-toc-item nero-toc-level-2"><a class="nero-toc-link" href="#개발환경"><span class="nero-toc-text">개발환경</span></a></li><li class="nero-toc-item nero-toc-level-2"><a class="nero-toc-link" href="#기능소개"><span class="nero-toc-text">기능소개</span></a><ol class="nero-toc-child"><li class="nero-toc-item nero-toc-level-3"><a class="nero-toc-link" href="#1-ARKit-amp-SceneKit을-이용한-AR앱-구현"><span class="nero-toc-text">1. ARKit &amp; SceneKit을 이용한 AR앱 구현</span></a></li><li class="nero-toc-item nero-toc-level-3"><a class="nero-toc-link" href="#2-딥러닝을-이용한-조명-인식"><span class="nero-toc-text">2. 딥러닝을 이용한 조명 인식</span></a></li></ol></li></ol></li><li class="nero-toc-item nero-toc-level-1"><a class="nero-toc-link" href="#결론"><span class="nero-toc-text"># 결론</span></a></li></ol>
            <hr class="nero-toc-line">
            <style>
                .nero-toc-line {
                    margin: 0;
                }

                .nero-toc-item {
                    list-style-type: none;
                }

                .nero-toc {
                    padding: 6px 20px;
                }
            </style>
            <!-- NERO -->
            <p>딥러닝을 이용하여 더욱 현실감 있는 AR 앱을 개발한 이야기를 공유합니다.<br><a id="more"></a></p>
<hr>
<h1 id="프로젝트-소개"><a href="#프로젝트-소개" class="headerlink" title="# 프로젝트 소개"></a># 프로젝트 소개</h1><p><strong>AR(Augmented Reality)</strong>을 이용한 다양한 어플리케이션들이 출시되고 있습니다. 이러한 AR 어플리케이션들은 Android에서는 <a href="https://developers.google.com/ar" target="_blank" rel="external nofollow noopener noreferrer">ARCore</a>를 그리고 iOS에서는 <a href="https://developer.apple.com/kr/augmented-reality/arkit/" target="_blank" rel="external nofollow noopener noreferrer">ARKit</a>를 통해 구현할 수 있습니다.</p>
<div class="figure " style="width:;"><a class="fancybox" href="https://user-images.githubusercontent.com/26322627/69536166-d2067f00-0fc0-11ea-8883-b9ae5509869a.png" target="_blank" rel="external nofollow noopener noreferrer" title="IKEA에서 출시한 AR 어플리케이션 Place<br>출처 : <a href=https://mobile-ar.reality.news/>https://mobile-ar.reality.news</a>" data-caption="IKEA에서 출시한 AR 어플리케이션 Place<br>출처 : <a href=https://mobile-ar.reality.news/>https://mobile-ar.reality.news</a>" data-fancybox="default style=" visible: hidden"><img class="fig-img" src="https://user-images.githubusercontent.com/26322627/69536166-d2067f00-0fc0-11ea-8883-b9ae5509869a.png" alt="IKEA에서 출시한 AR 어플리케이션 Place<br>출처 : <a href=https://mobile-ar.reality.news/>https://mobile-ar.reality.news</a>"></a><span class="caption">IKEA에서 출시한 AR 어플리케이션 Place<br>출처 : <a href="https://mobile-ar.reality.news/" rel="external nofollow noopener noreferrer" target="_blank">https://mobile-ar.reality.news</a></span></div>

<p>이번 프로젝트는 iOS의 ARKit를 이용하여 AR 어플리케이션을 구현하였는데, 추가로 딥러닝을 이용하여 AR 오브젝트들의 그림자를 더욱 현실감 있게 구현해보았습니다.</p>
<blockquote>
<p>시작하기에 앞서 프로젝트에 사용된 어플리케이션은 Apple에서 제공하는 Sample Code인 <a href="https://developer.apple.com/documentation/arkit/placing_objects_and_handling_3d_interaction" target="_blank" rel="external nofollow noopener noreferrer">Placing Objects and Handling 3D Interaction</a>의 일부 코드를 이용하여 만들었음을 밝힙니다.</p>
</blockquote>
<hr>
<h2 id="프로젝트-목표"><a href="#프로젝트-목표" class="headerlink" title="프로젝트 목표"></a>프로젝트 목표</h2><p>대부분의 AR에 사용되는 3D 모델들은 아래 Apple Sample Code인 <a href="https://developer.apple.com/documentation/arkit/placing_objects_and_handling_3d_interaction" target="_blank" rel="external nofollow noopener noreferrer">Placing Objects and Handling 3D Interaction</a>에 사용된 램프 모델과 같이 고정된 그림자 이미지를 가지고 있습니다. 이러한 고정된 그림자는 보통 어떠한 상황에서도 어색하지 않을 범용적인 형태의 그림자를 가지고 있지만, 상황에 따라 주변 물체들과 이질감이 느껴집니다.</p>
<div class="figure " style="width:;"><a class="fancybox" href="https://user-images.githubusercontent.com/26322627/69901403-6d826000-13c4-11ea-9282-4b58dac120ac.png" target="_blank" rel="external nofollow noopener noreferrer" title="Apple의 Sample Code에 사용된 램프 모델<br>출처 - <a href=https://developer.apple.com/documentation/arkit/placing_objects_and_handling_3d_interaction>Placing Objects and Handling 3D Interaction</a>" data-caption="Apple의 Sample Code에 사용된 램프 모델<br>출처 - <a href=https://developer.apple.com/documentation/arkit/placing_objects_and_handling_3d_interaction>Placing Objects and Handling 3D Interaction</a>" data-fancybox="default style=" visible: hidden"><img class="fig-img" src="https://user-images.githubusercontent.com/26322627/69901403-6d826000-13c4-11ea-9282-4b58dac120ac.png" alt="Apple의 Sample Code에 사용된 램프 모델<br>출처 - <a href=https://developer.apple.com/documentation/arkit/placing_objects_and_handling_3d_interaction>Placing Objects and Handling 3D Interaction</a>"></a><span class="caption">Apple의 Sample Code에 사용된 램프 모델<br>출처 - <a href="https://developer.apple.com/documentation/arkit/placing_objects_and_handling_3d_interaction" rel="external nofollow noopener noreferrer" target="_blank">Placing Objects and Handling 3D Interaction</a></span></div>

<p>가끔 고정된 그림자 이미지가 아닌, 임의의 가상 조명을 생성하여 오브젝트에 그림자를 그려주는 몇몇 AR 어플리케이션들이 있지만, 가상 조명의 위치나 밝기가 현실에 존재하는 광원과 달라 몰입감이 떨어지는건 마찬가지였습니다.</p>
<p>가상 오브젝트의 색감 또는 그림자가 주변 물체와 이질감이 느껴지는 원인은, 현실에 있는 조명들의 <strong>위치</strong>와 <strong>밝기</strong> 정보가 가상 오브젝트에 반영되어 랜더링 되지 않았기 때문이라고 생각하였습니다. 따라서 이번 프로젝트의 목표를 다음과 같이 정의하였습니다.</p>
<blockquote>
<p>✔︎ 프로젝트 목표<br>현실의 조명의 위치와 밝기 정보를 반영하여, 더욱 현실감 있는 AR 어플리케이션 만들어보자!</p>
</blockquote>
<!-- TODO :: before와 after 이미지 넣고 이걸 이렇게! 추가하기 -->

<hr>
<h1 id="프로젝트-결과물"><a href="#프로젝트-결과물" class="headerlink" title="# 프로젝트 결과물"></a># 프로젝트 결과물</h1><p>백문이 불여일견이니 먼저 어플리케이션 작동 영상을 보겠습니다.</p>
<iframe width="100%" height="500" src="https://www.youtube.com/embed/1RMhd_r3AuQ?cc_load_policy=1&mute=1" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<!-- iOS 앱은 [App Store](https://apps.apple.com/kr/app/tooreal/id1473239669)에 게시해 두었습니다. -->

<hr>
<h2 id="개발환경"><a href="#개발환경" class="headerlink" title="개발환경"></a>개발환경</h2><p>다음과 같은 개발 환경에서 작업하였습니다.</p>
<div class="figure " style="width:;"><a class="fancybox" href="https://user-images.githubusercontent.com/26322627/70038098-10bcba80-15fb-11ea-94d2-314f8d598601.png" target="_blank" rel="external nofollow noopener noreferrer" title="개발에 사용된 언어, 프레임워크 및 툴" data-caption="개발에 사용된 언어, 프레임워크 및 툴" data-fancybox="default style=" visible: hidden"><img class="fig-img" src="https://user-images.githubusercontent.com/26322627/70038098-10bcba80-15fb-11ea-94d2-314f8d598601.png" alt="개발에 사용된 언어, 프레임워크 및 툴"></a><span class="caption">개발에 사용된 언어, 프레임워크 및 툴</span></div>

<blockquote>
<p>✔︎ Development environment and frameworks</p>
</blockquote>
<ul>
<li>IDE : XCode / Jupyter Notebook</li>
<li>Language : Swift / Python3</li>
<li>iOS : ARKit / SceneKit / Vision / CoreML</li>
<li>Deep Learning : YOLO v3 / Keras / Tensorflow</li>
</ul>
<hr>
<h2 id="기능소개"><a href="#기능소개" class="headerlink" title="기능소개"></a>기능소개</h2><p>전체적인 어플리케이션은 다음과 같이 여섯 단계로 서비스 로직이 진행됩니다.</p>
<blockquote>
<p>✔︎ ARKit &amp; SceneKit을 이용한 AR앱 구현</p>
</blockquote>
<ol>
<li>평면 탐지(Plane detection)</li>
<li>설치가능한 가상 오브젝트 추천</li>
<li>가상 오브젝트 설치 및 인터랙션</li>
</ol>
<blockquote>
<p>✔︎ 딥러닝을 이용한 조명 인식</p>
</blockquote>
<ol start="4">
<li>가상조명 설치</li>
<li>가상조명 삭제</li>
<li>현실감 있는 그림자 랜더링</li>
</ol>
<p>1 ~ 3단계는 <strong>ARKit &amp; SceneKit을 이용한 AR앱 구현</strong> 부분이고, 4 ~ 6단계인 <strong>딥러닝을 이용한 조명 인식</strong> 부분으로 나눌 수 있습니다.</p>
<hr>
<h3 id="1-ARKit-amp-SceneKit을-이용한-AR앱-구현"><a href="#1-ARKit-amp-SceneKit을-이용한-AR앱-구현" class="headerlink" title="1. ARKit &amp; SceneKit을 이용한 AR앱 구현"></a>1. ARKit &amp; SceneKit을 이용한 AR앱 구현</h3><div class="service-flow">
  <div><div class="figure " style>
<video class="fig-video" autoplay playsinline loop muted controls alt="1. 평면 탐지(Plane detection)">
<source src="/assets/videos/01.plane_detection.mp4" type="video/mp4">
<p>Your browser doesn't support HTML5 Video :/</p></video>
<span class="caption">1. 평면 탐지(Plane detection)</span>
</div></div>
  <div><div class="figure " style>
<video class="fig-video" autoplay playsinline loop muted controls alt="2. 설치가능한 가상 오브젝트 추천">
<source src="/assets/videos/02.object_recommendation.mp4" type="video/mp4">
<p>Your browser doesn't support HTML5 Video :/</p></video>
<span class="caption">2. 설치가능한 가상 오브젝트 추천</span>
</div></div>
  <div><div class="figure " style>
<video class="fig-video" autoplay playsinline loop muted controls alt="3. 가상 오브젝트 설치 및 인터랙션">
<source src="/assets/videos/03.install_object.mp4" type="video/mp4">
<p>Your browser doesn't support HTML5 Video :/</p></video>
<span class="caption">3. 가상 오브젝트 설치 및 인터랙션</span>
</div></div>
  </div>


<p>어플리케이션이 현실 공간을 인식하여 벽면이나 바닥을 인식합니다. 공간이 인식되면 현재 바라보고 있는 장소에 설치 가능한 가구를 목록을 보여주고, 원하는 가구를 선택하여 설치할 수 있습니다. 또한 설치된 가구를 원하는 장소로 이동하거나 회전하는 등의 기본적인 인터랙션이 가능합니다.</p>
<hr>
<h3 id="2-딥러닝을-이용한-조명-인식"><a href="#2-딥러닝을-이용한-조명-인식" class="headerlink" title="2. 딥러닝을 이용한 조명 인식"></a>2. 딥러닝을 이용한 조명 인식</h3><div class="service-flow">
  <div><div class="figure " style>
<video class="fig-video" autoplay playsinline loop muted controls alt="4. 가상조명 설치">
<source src="/assets/videos/04.install_scnlight.mp4" type="video/mp4">
<p>Your browser doesn't support HTML5 Video :/</p></video>
<span class="caption">4. 가상조명 설치</span>
</div></div>
  <div><div class="figure " style>
<video class="fig-video" autoplay playsinline loop muted controls alt="5. 가상조명 삭제">
<source src="/assets/videos/05.remove_scnlight.mp4" type="video/mp4">
<p>Your browser doesn't support HTML5 Video :/</p></video>
<span class="caption">5. 가상조명 삭제</span>
</div></div>
  <div><div class="figure " style>
<video class="fig-video" autoplay playsinline loop muted controls alt="6. 현실감 있는 그림자 랜더링">
<source src="/assets/videos/06.shadow_rendering_and_object_interaction.mp4" type="video/mp4">
<p>Your browser doesn't support HTML5 Video :/</p></video>
<span class="caption">6. 현실감 있는 그림자 랜더링</span>
</div>
  </div>
</div>

<p>본 어플리케이션에서는 두 가지 조명 인식 방식을 구현하였습니다. 하나는 <a href="https://cloud.google.com/vision" target="_blank" rel="external nofollow noopener noreferrer">Google Vision API</a>를 이용한 방법이고, 다른 방법은 <a href="https://pjreddie.com/darknet/yolo/" target="_blank" rel="external nofollow noopener noreferrer">YOLO v3</a>라는 딥러닝 모델을 이용한 방법입니다.</p>
<p><strong>Google Vision API 방식</strong>의 경우 사용자가 조명을 바라보고 인식 버튼을 한번 더 누르면 해당 프레임 이미지를 Google 서버로 전달하여 조명 존재여부를 요청하고, 이미지 중앙좌표를 <a href="https://developer.apple.com/documentation/arkit/arframe/2875718-hittest" target="_blank" rel="external nofollow noopener noreferrer">hitTest</a> 메소드로 입력하여 조명의 3차원 좌표를 획득합니다. 그리고 <code>Google Vision API</code>에서 조명이 존재한다고 반환하는 경우, 앞서 얻은 3차원 좌표에 가상 조명을 설치하는 방식입니다.<br>이 방법의 경우 조명의 실제 3차원 좌표가 아닌 곳에 가상 조명이 설치된 가능성이 있고, 실시간으로 조명을 인식하는 것이 아니라 사용자가 인식하고자 하는 조명 개수만큼 인식 버튼을 눌러야한다는 단점이 있습니다. 그럼에도 불구하고 Google에서 학습한 방대한 모델을 이용하기 때문에 범용적인 조명을 인식할 수 있다는 장점을 가지고 있습니다.</p>
<p><strong>YOLO v3 방식</strong>은 사용자가 조명 인식모드로 진입한 뒤, 카메라로 주변을 비추면 매프레임 정보를 <code>YOLO v3</code> 모델이 해석합니다. <code>YOLO v3</code> 모델은, 해당 이미지 안에 존재하는 조명의 온오프 상태, 종류, 신뢰도(confidence) 그리고 바운딩 박스(2차원 박스의 대각선 두 점의 좌표)를 반환합니다. 매프레임마다 바운딩 박스 좌표를 <a href="https://developer.apple.com/documentation/arkit/arframe/2875718-hittest" target="_blank" rel="external nofollow noopener noreferrer">hitTest</a> 메소드에 입력하여 조명의 3차원 좌표를 계산하고, 조명의 상태에 따라 경우 해당 좌표에 가상 조명을 추가하거나 삭제합니다.<br>이 방식은 <code>CoreML</code>을 이용하여 모바일에 탑재한 <code>YOLO v3</code> 모델을 이용하기 때문에 별도의 네트워크가 필요하지 않으며, 실시간으로 조명의 상태 및 좌표를 인식할 수 있다는 장점을 가지고 있습니다. 하지만 학습된 조명만 인식이 가능하다는 단점을 가지고 있습니다.<br><br></p>
<table>
<thead>
<tr>
<th>✔︎ Google Vision API 방식</th>
<th>✔︎ YOLO v3 방식</th>
</tr>
</thead>
<tbody><tr>
<td>• 범용적인 조명 인식이 가능</td>
<td>• 학습된 5개의 조명만 인식가능</td>
</tr>
<tr>
<td>• 조명의 온오프 상태를 알 수 없음</td>
<td>• 조명의 온오프 상태 구분가능</td>
</tr>
<tr>
<td>• 실시간 조명 추적 불가능</td>
<td>• 실시간 조명 추적 가능</td>
</tr>
<tr>
<td>• 조명의 정확한 좌표를 얻을 수 없음</td>
<td>• 조명의 2차원 좌표 획득 가능</td>
</tr>
<tr>
<td>• 네트워크 통신 필요</td>
<td>• 네트워크 통신 불필요</td>
</tr>
</tbody></table>
<p>위와 같은 방식들로 설치된 조명들은 <code>ARKit</code>의 <a href="https://developer.apple.com/documentation/arkit/arlightestimate" target="_blank" rel="external nofollow noopener noreferrer">LightEstimation</a> 클래스에 들어있는 루멘(lm)과 색 온도(Kelvin) 값을 매프레임마다 계산하여 실시간으로 반영해주고 있습니다.</p>
<p>이렇게 설치된 가상 조명들은 현실 조명의 위치, 조도, 색온도 정보를 반영하였기 때문에 가상 오브젝트의 텍스쳐가 더욱 현실감 있게 표현되고 조명과 오브젝트의 상태적 위치에 따라 현실적인 방향의 그림자가 실시간으로 랜더링되어 <u>더욱 현실적인 AR 어플리케이션 구현</u>이라는 목표를 달성할 수 있습니다.</p>
<hr>
<h1 id="결론"><a href="#결론" class="headerlink" title="# 결론"></a># 결론</h1><p>이번 프로젝트는 홀로 3개월 동안 진행하였는데, iOS도 Object Detection 딥러닝 모델 개발도 처음이었던 터라 많이 헤맷지만 예전부터 딥러닝 모델을 모바일에 올려보고 싶었기에 너무 즐겁게 진행할 수 있었습니다.</p>
<blockquote>
<p>앞으로 총 4부작에 걸쳐 프로젝트를 개발 내용을 공유하도록 하겠습니다.</p>
</blockquote>
<ul>
<li><a href="#">✔︎ 1부. 딥러닝을 이용하여 더욱 현실감 있는 AR 앱 만들기</a></li>
<li>2부. ARKit &amp; SceneKit을 이용한 AR앱 구현</li>
<li>3부. YOLO v3를 이용하여 조명인식 딥러닝 모델 만들기</li>
<li>4부. CoreML을 이용하여 iOS 앱에 YOLO v3모델 올리기</li>
</ul>
<!-- CSS -->
<style type="text/css">
  .service-flow {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: space-around;
    align-content: space-around;
  }

  .service-flow>div {
    max-width: 250px;
    margin-bottom: 16px;
  }

  @media (min-width: 320px) and (max-width: 480px) {
    .service-flow>div {
      max-width: none;
      width: 100%;
    }
  }
</style>
            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
        <div class="post-footer-tags">
            <span class="text-color-light text-small">TAGGED IN</span><br>
            
    <a class="tag tag--primary tag--small t-link" href="/tags/AR/" rel="tag">AR</a> <a class="tag tag--primary tag--small t-link" href="/tags/Deep-Learning/" rel="tag">Deep Learning</a> <a class="tag tag--primary tag--small t-link" href="/tags/Object-Detection/" rel="tag">Object Detection</a> <a class="tag tag--primary tag--small t-link" href="/tags/YOLO-v3/" rel="tag">YOLO v3</a> <a class="tag tag--primary tag--small t-link" href="/tags/iOS/" rel="tag">iOS</a>

        </div>
        
        
        <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled" aria-hidden="true">
                        
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a class="post-action-btn btn btn--default tooltip--top" href="/2019/11/09/pl-python-itertools/" data-tooltip="Python Itertools" aria-label="NEXT: Python Itertools">
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://nero.devstory.co.kr/2019/11/24/pj-too-real-01/" title="Share on Facebook" aria-label="Share on Facebook" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://twitter.com/intent/tweet?text=https://nero.devstory.co.kr/2019/11/24/pj-too-real-01/" title="Share on Twitter" aria-label="Share on Twitter" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
        
        
    </div>
</article>
<!-- utterances comment -->

  <script src="https://utteranc.es/client.js" repo="nero-angela/nero-angela.github.io" label="🐈" theme="github-light" crossorigin="anonymous" issue-term="pathname" async>
  </script>

                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2019 Nero. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a class="post-action-btn btn btn--disabled" aria-hidden="true">
                        
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a class="post-action-btn btn btn--default tooltip--top" href="/2019/11/09/pl-python-itertools/" data-tooltip="Python Itertools" aria-label="NEXT: Python Itertools">
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://nero.devstory.co.kr/2019/11/24/pj-too-real-01/" title="Share on Facebook" aria-label="Share on Facebook" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a class="post-action-btn btn btn--default" target="_blank" href="https://twitter.com/intent/tweet?text=https://nero.devstory.co.kr/2019/11/24/pj-too-real-01/" title="Share on Twitter" aria-label="Share on Twitter" rel="external nofollow noopener noreferrer">
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="5">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://nero.devstory.co.kr/2019/11/24/pj-too-real-01/" aria-label="Share on Facebook" rel="external nofollow noopener noreferrer">
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Share on Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a class="share-option-btn" target="_blank" href="https://twitter.com/intent/tweet?text=https://nero.devstory.co.kr/2019/11/24/pj-too-real-01/" aria-label="Share on Twitter" rel="external nofollow noopener noreferrer">
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/profile.jpeg" alt="Author&#39;s picture">
        
            <h4 id="about-card-name">Nero</h4>
        
            <div id="about-card-bio"><p><a href="https://github.com/nero-angela" target="_blank" rel="external nofollow noopener noreferrer">Github</a> / <a href="http://devstory.co.kr" target="_blank" rel="external nofollow noopener noreferrer">Porfolio</a></p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>Developer</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br>
                Seoul/Korea
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/script-hrmw3syrdm4kcpvyb6xkftyea0uhpmvbp7oomyeg75rarumqlb9ivnsnwdph.min.js"></script>
<!--SCRIPTS END-->


    




    </body>
</html>
